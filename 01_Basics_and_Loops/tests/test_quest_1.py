# 01_Basics_and_Loops/tests/test_quest_1.py

import unittest
import os
import inspect
import sys

# --- –ë–õ–û–ö 1: –ù–ê–î–ï–ñ–ù–´–ô –ò–ú–ü–û–†–¢ –§–£–ù–ö–¶–ò–ò –£–ß–ï–ù–ò–ö–ê ---

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å —Ñ–∞–π–ª–æ–º —Ä–µ—à–µ–Ω–∏—è: 'Quest_1_My_LEN'
# os.path.dirname(os.path.abspath(__file__)) = —Ç–µ–∫—É—â–∞—è –ø–∞–ø–∫–∞ 'tests'
# '..' = –ø–æ–¥–Ω—è—Ç—å—Å—è –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ (–≤ '01_Basics_and_Loops')
# 'Quest_1_My_LEN' = –ø–∞–ø–∫–∞ —Å —Ñ–∞–π–ª–æ–º —Ä–µ—à–µ–Ω–∏—è
SOLUTION_PATH = os.path.join(
    os.path.dirname(os.path.abspath(__file__)), '..', 'Quest_1_My_LEN'
)

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –≤ sys.path, —á—Ç–æ–±—ã Python –º–æ–≥ –Ω–∞–π—Ç–∏ –º–æ–¥—É–ª—å
sys.path.append(SOLUTION_PATH)

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é. –ò—Å–ø–æ–ª—å–∑—É–µ–º try/except –¥–ª—è –æ—Ç–ª–æ–≤–∞ –ø—Ä–æ–±–ª–µ–º, –µ—Å–ª–∏ —Ñ–∞–π–ª —É–¥–∞–ª–µ–Ω.
try:
    from solution_template import my_len
except ImportError:
    print(f"FATAL ERROR: –ù–µ —É–¥–∞–ª–æ—Å—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å 'my_len' –∏–∑ 'solution_template.py'.")
    print(f"–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª —Ä–µ—à–µ–Ω–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ –ø—É—Ç–∏: {os.path.join(SOLUTION_PATH, 'solution_template.py')}")
    raise
# -----------------------------------------------------

# –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ó–ê–ü–†–ï–©–ï–ù–û –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —ç—Ç–æ–º –∫–≤–µ—Å—Ç–µ
FORBIDDEN_WORDS = ["len("] 

# --- –ë–õ–û–ö 2: –ü–†–û–í–ï–†–ö–ê –ù–ê –ñ–£–õ–¨–ù–ò–ß–ï–°–¢–í–û ---

class ForbiddenWordChecker(unittest.TestCase):
    """–ö–ª–∞—Å—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π."""
    
    def test_forbidden_words_not_used(self):
        """–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —É—á–µ–Ω–∏–∫ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, len())."""
        
        # –ü–æ–ª—É—á–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ my_len
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º .strip() –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏
        source_code = inspect.getsource(my_len).strip()
        
        for word in FORBIDDEN_WORDS:
            self.assertNotIn(
                word, 
                source_code, 
                f"\n\nüö´ –ñ–£–õ–¨–ù–ò–ß–ï–°–¢–í–û –û–ë–ù–ê–†–£–ñ–ï–ù–û! –í—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ '{word.strip('(')}' –≤ —Å–≤–æ–µ–º —Ä–µ—à–µ–Ω–∏–∏."
                f"\n–¶–µ–ª—å —ç—Ç–æ–≥–æ –∫–≤–µ—Å—Ç–∞ ‚Äî –Ω–∞–ø–∏—Å–∞—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—è —Ü–∏–∫–ª—ã."
            )

# --- –ë–õ–û–ö 3: –ü–†–û–í–ï–†–ö–ê –ö–û–†–†–ï–ö–¢–ù–û–°–¢–ò ---

class TestMyLenFunction(unittest.TestCase):
    """–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ my_len."""
    
    def test_my_len_with_list(self):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã –Ω–∞ —Å–ø–∏—Å–∫–µ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª."""
        self.assertEqual(my_len([10, 20, 30, 40]), 4)
        self.assertEqual(my_len([]), 0)
        
    def test_my_len_with_string(self):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã –Ω–∞ —Å—Ç—Ä–æ–∫–µ."""
        self.assertEqual(my_len("hello"), 5)
        self.assertEqual(my_len(""), 0)

    def test_my_len_with_tuple(self):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã –Ω–∞ –∫–æ—Ä—Ç–µ–∂–µ."""
        self.assertEqual(my_len((1, 2, 3)), 3)
        
    def test_my_len_with_large_list(self):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã –Ω–∞ –±–æ–ª—å—à–æ–º —Å–ø–∏—Å–∫–µ."""
        large_list = list(range(100))
        self.assertEqual(my_len(large_list), 100)

if __name__ == '__main__':
    unittest.main()